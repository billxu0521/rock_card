<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>你好，GitHub</title>
    <link rel="stylesheet" type="text/css" href="./themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="./themes/icon.css">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easyui.min.js"></script>
    
  </head>
  <body>  
	<p id="title">已選擇卡牌: </p>
	<div style="margin:20px 0;"></div>
	
	<table id="dg" class="easyui-datagrid" title="總分: " style="width:200px;height:1000px"
			data-options="rownumbers:true,singleSelect:false,url:'card_data.json',method:'get'">
		<thead>
			<tr>
				<th data-options="field:'ck',checkbox:true"></th>
				<th data-options="field:'name',width:80">名稱</th>
				<th data-options="field:'score',width:40,align:'right'">分數</th>				
			</tr>
			<tr>
				<th data-options="field:'ck',checkbox:true"></th>
				<th data-options="field:'name',width:80">名稱</th>
				<th data-options="field:'score',width:40,align:'right'">分數</th>				
			</tr>			
		</thead>
	</table> 
	<script type="text/javascript">
		$(function(){
			$('#dg').datagrid({
				onCheck : function(index,row) {
					setSelectedTitle(index,row);
				},
				onUncheck : function(index,row) {
					setSelectedTitle(index,row);
				},
				onCheckAll : function(index,row) {
					setSelectedTitle(index,row);
				},
				onUncheckAll : function(index,row) {
					setSelectedTitle(index,row);
				}				
			});	
			function setSelectedTitle (index,row) {
				var checkedItems = $('#dg').datagrid('getChecked');
				var ed = '已選擇卡牌: ';
				$.each(checkedItems, function(index, item){
					if(index === checkedItems.length-1) {
						ed += item.name;	
					} else {
						ed += item.name + ", ";	
					}				
				});    					
				$('#title').text(ed);
			}				
		});
	</script>	  
  </body>
</html>
